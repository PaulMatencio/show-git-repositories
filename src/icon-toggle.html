<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="../bower_components/polymer/lib/mixins/gesture-event-listeners.html">
<link rel="import" href="../bower_components/iron-icon/iron-icon.html">
<link rel="import" href="../bower_components/iron-icons/iron-icons.html">
<dom-module id="icon-toggle">
  <template>
    <style>
      /* shadow DOM styles go here */
      :host {
        display: inline-block;
        /* color: blue ;  current color */
      }
      /* iron-icon element */
      /* iron-icon tag used an SVG icon */
      iron-icon {
        fill: var(--icon-toggle-color,rgba(0,0,0,0));
        stroke: var(--icon-toggle-outline-color,currentcolor);
      }
      /*
      The :host() function matches the host element if the selector inside the parentheses matches
      the host element. In this case, [pressed]is a standard CSS attribute selector,
      so this rule matches when the icon-toggle has a pressed attribute set on it.
      */
      :host([pressed]) iron-icon {
        /* fill the icon with the current color if pressed selector */
        fill: var(--icon-toggle-pressed-color,currentcolor);
      }
    </style>
    <iron-icon icon="[[toggleIcon]]">
    </iron-icon>
  </template>

  <script>
   /*  class IconToggle extends Polymer.Element {
   */
   /*
   For class-style elements based on Polymer.Element, you need to explicitly
   add gesture support by importing and using the Polymer.
   GestureEventListeners mixin:
   */
    class IconToggle extends Polymer.GestureEventListeners(Polymer.Element) {
      /* is return the tag */
      static get is() {
        return "icon-toggle";
      }
      /* add iconToggle properties */
      static get properties() {
        return {

        /* toggleIcon is a property you'll define on the toggle button element */
        /* toogleIcon is mappes to toogle-icon property of the icon-toggle element  */

          toggleIcon: {
            type: String
          },

          pressed: {
            type: Boolean,
            /*
            The notify property tells Polymer to dispatch property change events
            when the property value changes.
            This lets the change be observed by other nodes
            */
            notify: true,
            /* The reflectToAttribute property tells Polymer
             to update the corresponding attribute when the property changes.

             This lets you style the element using an attribute selector,
             like icon-toggle[pressed]
              */
            reflectToAttribute: true,
            /* default value : false */
            value: false,
            observer: '_isPressed'
          },

        }
      }

      constructor() {
        super();
        /*
          Use the standard addEventListener method to add event listeners imperatively.
        */
        /*
          The tap event is generated by Polymer's gesture system when the
          user clicks or taps on a target with a mouse or finger.
        */
        /* this.addEventListener('tap', 'toggle');  ???  */
        Polymer.Gestures.addListener(this, 'tap', () => this.toggle());
      }

      ready() {
        super.ready() ;
      }

      connectedCallback() {
        super.connectedCallback();
      }

      _isPressed(){
        return this.pressed;
      }

      toggle() {
        this.pressed = !this.pressed ;
      }
    }
    customElements.define(IconToggle.is, IconToggle);
  </script>
</dom-module>
